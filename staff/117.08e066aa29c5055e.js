"use strict";(self.webpackChunkstaff=self.webpackChunkstaff||[]).push([[117],{8117:(Dt,_,r)=>{r.r(_),r.d(_,{BookingPageModule:()=>yt});var s=r(6895),g=r(8630),p=r(9429),t=r(4650),u=r(9030),d=r(4859),m=r(7855);function v(e,a){1&e&&(t.ynx(0),t._UZ(1,"div",2),t.BQk())}function T(e,a){1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"img",4),t.qZA(),t.BQk())}function x(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.active())}),t.qZA()}if(2&e){const i=t.oxw(2);t.ekj("active-seat",i.isActive)}}function S(e,a){if(1&e&&t._UZ(0,"div",3),2&e){const i=t.oxw(2);t.ekj("seat-sold",1===i.seatData.status)}}function k(e,a){if(1&e&&(t.ynx(0),t.YNc(1,x,1,2,"ng-template",5),t.YNc(2,S,1,2,"ng-template",null,6,t.W1O),t.BQk()),2&e){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",0===n.seatData.status)("ngIfElse",i)}}function C(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.active())}),t._UZ(1,"img",9),t.qZA()}if(2&e){const i=t.oxw(2);t.ekj("active-seat",i.isActive)}}function b(e,a){if(1&e&&(t.TgZ(0,"div",3),t._UZ(1,"img",9),t.qZA()),2&e){const i=t.oxw(2);t.ekj("seat-sold",1===i.seatData.status)}}function w(e,a){if(1&e&&(t.ynx(0),t.YNc(1,C,2,2,"ng-template",5),t.YNc(2,b,2,2,"ng-template",null,6,t.W1O),t.BQk()),2&e){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",0===n.seatData.status)("ngIfElse",i)}}let Z=(()=>{class e{constructor(i){this.bookingService=i,this.rows="",this.cols="",this.seatData={},this.isPreview=!1,this.isActive=!1,this.activeOut=new t.vpe}ngOnInit(){}active(){if(!this.isPreview){const i=this.bookingService.getShopCart().ticket,n=this.bookingService.getTempSeatArray();(this.isActive||i.length>n.length)&&(this.isActive=!this.isActive,this.activeOut.emit({seatName:this.rows+this.seatData.cols,isActive:this.isActive}))}}ngOnChanges(){}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-seatchart-seat"]],inputs:{rows:"rows",cols:"cols",seatData:"seatData",isPreview:"isPreview"},outputs:{activeOut:"activeOut"},features:[t.TTD],decls:5,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"seat","seat-none"],[1,"seat","seat-lock"],["src","assets/images/icon/no.svg","alt","no",1,"h-full","mx-auto"],[3,"ngIf","ngIfElse"],["noFree",""],[1,"seat","seat-free","text-gray-400",3,"click"],[1,"seat","seat-free",3,"click"],["src","assets/images/icon/handicapped.png","alt","handicapped",1,"h-full","mx-auto"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.YNc(1,v,2,0,"ng-container",1),t.YNc(2,T,3,0,"ng-container",1),t.YNc(3,k,4,2,"ng-container",1),t.YNc(4,w,4,2,"ng-container",1),t.qZA()),2&i&&(t.Q6J("ngSwitch",n.seatData.type),t.xp6(1),t.Q6J("ngSwitchCase","N"),t.xp6(1),t.Q6J("ngSwitchCase","-1"),t.xp6(1),t.Q6J("ngSwitchCase","0"),t.xp6(1),t.Q6J("ngSwitchCase","1"))},dependencies:[s.O5,s.RF,s.n9],styles:[".seat[_ngcontent-%COMP%]{height:1.5rem;width:100%;border-radius:.5rem .5rem .375rem .375rem;padding:.25rem}.seat-free[_ngcontent-%COMP%]{cursor:pointer;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-lock[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.seat-sold[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.seat-none[_ngcontent-%COMP%]{background-color:transparent}.active-seat[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(113 221 255 / var(--tw-bg-opacity))}"]}),e})();function y(e,a){1&e&&t._UZ(0,"div",17)}function A(e,a){if(1&e&&(t.TgZ(0,"div",18),t._uU(1),t.qZA()),2&e){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.rows)}}function D(e,a){if(1&e&&(t.TgZ(0,"li",14),t.YNc(1,y,1,0,"ng-template",15),t.YNc(2,A,2,1,"ng-template",null,16,t.W1O),t.qZA()),2&e){const i=a.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf","none"===i.rows)("ngIfElse",n)}}function O(e,a){if(1&e&&(t.TgZ(0,"li",22),t._UZ(1,"app-seatchart-seat",23),t.qZA()),2&e){const i=t.oxw(3);t.xp6(1),t.Q6J("seatData",i.noneSeat)}}function I(e,a){if(1&e&&t.YNc(0,O,2,1,"li",21),2&e){const i=t.oxw(2);t.Q6J("ngForOf",i.seatData.colLabel)}}function F(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"li",22)(1,"app-seatchart-seat",24),t.NdJ("activeOut",function(o){t.CHM(i);const c=t.oxw(3);return t.KtG(c.changeSeatArray(o))}),t.qZA()()}if(2&e){const i=a.$implicit,n=a.index,o=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Q6J("rows",o.rows)("cols",c.seatData.colLabel[n])("seatData",i)("isPreview",c.isPreview)}}function M(e,a){if(1&e&&t.YNc(0,F,2,4,"li",21),2&e){const i=t.oxw().$implicit;t.Q6J("ngForOf",i.seat)}}function E(e,a){if(1&e&&(t.TgZ(0,"li")(1,"ul",19),t.YNc(2,I,1,1,"ng-template",15),t.YNc(3,M,1,1,"ng-template",null,20,t.W1O),t.qZA()()),2&e){const i=a.$implicit,n=t.MAs(4);t.xp6(2),t.Q6J("ngIf","none"===i.rows)("ngIfElse",n)}}function N(e,a){if(1&e&&(t.TgZ(0,"li",25),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.hij(" ",i," ")}}function U(e,a){if(1&e&&(t.TgZ(0,"div",26)(1,"ul",27)(2,"li",28),t._UZ(3,"div",29),t._uU(4),t.qZA(),t.TgZ(5,"li",28),t._UZ(6,"div",30),t._uU(7),t.qZA(),t.TgZ(8,"li",28),t._UZ(9,"div",31),t._uU(10),t.qZA()()()),2&e){const i=t.oxw();t.xp6(4),t.hij(" \u672a\u51fa\u552e : ",i.seatData.free," "),t.xp6(3),t.hij(" \u5df2\u51fa\u552e : ",i.seatData.sold," "),t.xp6(3),t.hij(" \u5df2\u9396\u4f4f : ",i.seatData.lock," ")}}function J(e,a){if(1&e&&(t.TgZ(0,"div",32),t._uU(1," \u9084\u6709 "),t.TgZ(2,"span",33),t._uU(3),t.qZA(),t._uU(4," \u5f35\u672a\u78ba\u8a8d\u5ea7\u4f4d "),t.qZA()),2&e){const i=t.oxw();t.xp6(2),t.ekj("text-primary-500",i.remainSeat>0),t.xp6(1),t.Oqu(i.remainSeat)}}let h=(()=>{class e{constructor(i){this.bookingService=i,this.seatData={},this.isPreview=!0,this.seatSelectCounts=0,this.remainSeat=this.bookingService.getShopCart().ticket.length,this.noneSeat={cols:"",status:0,type:"N"},this.seatArray=[]}ngOnInit(){}ngOnChanges(){this.remainSeat=this.bookingService.getShopCart().ticket.length}changeSeatArray(i){this.bookingService.changeTempSeatArray(i),this.remainSeat=this.bookingService.getShopCart().ticket.length-this.bookingService.getTempSeatArray().length}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-seatchart"]],inputs:{seatData:"seatData",isPreview:"isPreview",seatSelectCounts:"seatSelectCounts"},features:[t.TTD],decls:17,vars:5,consts:[[1,"w-full"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pb-0"],["class","",4,"ngFor","ngForOf"],[1,"flex-1"],[4,"ngFor","ngForOf"],[1,"flex","w-full","px-5","mt-0.5"],[1,"w-6"],[2,"display","none"],[1,"flex","justify-between"],["class","w-full text-center text-gray-400","style","font-size: 20%;",4,"ngFor","ngForOf"],["class","flex justify-center mt-10 mb-5",4,"ngIf"],["class","mt-5 text-center",4,"ngIf"],[1,""],[3,"ngIf","ngIfElse"],["rows",""],[1,"w-6","h-7","rounded-t-lg","rounded-b-md","p-1"],[1,"w-6","h-7","rounded-t-lg","rounded-b-md","p-1","text-gray-400","flex","justify-center","items-center"],[1,"flex"],["seat",""],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatData"],[3,"rows","cols","seatData","isPreview","activeOut"],[1,"w-full","text-center","text-gray-400",2,"font-size","20%"],[1,"flex","justify-center","mt-10","mb-5"],[1,"flex","rounded-2xl","p-6","border","border-light-600"],[1,"flex","mx-3"],[1,"seat","seat-free","mr-3"],[1,"seat","seat-sold","mr-3"],[1,"seat","seat-lock","mr-3"],[1,"mt-5","text-center"],[1,"text-light-500"]],template:function(i,n){1&i&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3)(5,"ul"),t.YNc(6,D,4,2,"li",4),t.qZA(),t.TgZ(7,"ul",5),t.YNc(8,E,5,2,"li",6),t.qZA()(),t.TgZ(9,"div",7)(10,"div",8),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"div",5)(13,"ul",10),t.YNc(14,N,2,1,"li",11),t.qZA()()(),t.YNc(15,U,11,3,"div",12),t.YNc(16,J,5,3,"div",13),t.qZA()),2&i&&(t.xp6(6),t.Q6J("ngForOf",n.seatData.list),t.xp6(2),t.Q6J("ngForOf",n.seatData.list),t.xp6(6),t.Q6J("ngForOf",n.seatData.colLabel),t.xp6(1),t.Q6J("ngIf",n.isPreview),t.xp6(1),t.Q6J("ngIf",!n.isPreview))},dependencies:[s.sg,s.O5,Z],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.seat[_ngcontent-%COMP%]{height:1.5rem;width:1.75rem;border-radius:.5rem .5rem .375rem .375rem;padding:.25rem}.seat-free[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-lock[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.seat-sold[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}"]}),e})(),q=(()=>{class e{constructor(i,n){this.seatData=i,this.router=n}ngOnInit(){}goTicketType(){this.router.navigate([`/${p.F.BOOKING.ROOT}/${p.F.BOOKING.TICKET_TYPE}`])}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(g.WI),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-seat-dialog"]],decls:11,vars:2,consts:[[1,"text-center"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"seatData","isPreview"],["mat-dialog-actions","",1,"justify-center"],[1,"w-full","my-5","flex","justify-center","item-center"],["mat-raised-button","","mat-dialog-close","","color","accent","type","submit",1,"w-1/3"],["mat-raised-button","","mat-dialog-close","","color","primary","type","submit",1,"w-1/3",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2," \u5ea7\u4f4d\u9810\u89bd "),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-seatchart",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"button",6),t._uU(8," \u95dc\u9589\u9810\u89bd "),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return n.goTicketType()}),t._uU(10," \u524d\u5f80\u8a02\u7968 "),t.qZA()()()()),2&i&&(t.xp6(4),t.Q6J("seatData",n.seatData)("isPreview",!0))},dependencies:[g.ZT,g.uh,g.xY,g.H8,d.lW,h]}),e})();var P=r(2722);let Y=(()=>{class e{constructor(i){this.bookingService=i,this.date=new Date,this.dateIndex=0,this.dateEmit=new t.vpe,this.weekdays=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],this.isActive=!1}ngOnInit(){this.isActive=0===this.dateIndex,this.bookingService.dateSelect$.pipe((0,P.R)(this.bookingService.onDestroy$)).subscribe(i=>{this.isActive=i===String(this.date.getTime())})}dateOutput(){this.dateEmit.emit(String(this.date.getTime()))}ngOnDestroy(){this.bookingService.onDestroy$.next()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-date-select"]],inputs:{date:"date",dateIndex:"dateIndex"},outputs:{dateEmit:"dateEmit"},decls:5,vars:7,consts:[[1,"text-center","py-2","text-light-400","rounded-2xl","hover:bg-light-600","cursor-pointer",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.dateOutput()}),t._uU(1),t.ALo(2,"date"),t._UZ(3,"br"),t._uU(4),t.qZA()),2&i&&(t.ekj("date-active",n.isActive),t.xp6(1),t.hij(" ",t.xi3(2,4,n.date,"M/d")," "),t.xp6(3),t.hij(" ",0===n.dateIndex?"\u4eca\u65e5":n.weekdays[n.date.getDay()],"\n"))},dependencies:[s.uU],styles:[".date-active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(49 49 49 / var(--tw-bg-opacity));color:#fff}"]}),e})();function Q(e,a){1&e&&(t.ynx(0),t._uU(1," 2D "),t.BQk())}function B(e,a){1&e&&(t.ynx(0),t._uU(1," 3D "),t.BQk())}function j(e,a){1&e&&(t.ynx(0),t._uU(1," iMAX "),t.BQk())}function $(e,a){1&e&&(t.ynx(0),t._uU(1," 4DX "),t.BQk())}function G(e,a){if(1&e&&(t.TgZ(0,"span",10),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.time,"HH:mm")," ")}}function K(e,a){if(1&e&&(t.TgZ(0,"span",11),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.time,"HH:mm")," ")}}function L(e,a){if(1&e&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,i.time,"HH:mm")," ")}}function H(e,a){1&e&&t._UZ(0,"span",13)}function X(e,a){1&e&&t._UZ(0,"span",14)}function R(e,a){1&e&&t._UZ(0,"span",15)}let W=(()=>{class e{constructor(){this.movieTimeData={scheduleId:"",time:"",theater:"",theaterType:0,totalCapacity:0,remainSeats:0},this.scheduleIdEmit=new t.vpe,this.time=new Date}ngOnInit(){this.time=new Date(this.movieTimeData.time)}scheduleIdOutput(){this.scheduleIdEmit.emit(this.movieTimeData.scheduleId)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-time"]],inputs:{movieTimeData:"movieTimeData"},outputs:{scheduleIdEmit:"scheduleIdEmit"},decls:16,vars:12,consts:[[1,"cursor-pointer","bg-dark-200","rounded-2xl","text-center","py-2","relative",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","text-info-100",4,"ngIf"],["class","text-warning-100",4,"ngIf"],["class","text-warn-100",4,"ngIf"],[1,"absolute","bottom-0","left-0","right-0"],["class","line bg-info-100",4,"ngIf"],["class","line bg-warning-100",4,"ngIf"],["class","line bg-warn-100",4,"ngIf"],[1,"text-info-100"],[1,"text-warning-100"],[1,"text-warn-100"],[1,"line","bg-info-100"],[1,"line","bg-warning-100"],[1,"line","bg-warn-100"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.scheduleIdOutput()}),t.TgZ(1,"div",1),t.YNc(2,Q,2,0,"ng-container",2),t.YNc(3,B,2,0,"ng-container",2),t.YNc(4,j,2,0,"ng-container",2),t.YNc(5,$,2,0,"ng-container",2),t.qZA(),t.TgZ(6,"div"),t.YNc(7,G,3,4,"span",3),t.YNc(8,K,3,4,"span",4),t.YNc(9,L,3,4,"span",5),t.qZA(),t.TgZ(10,"div"),t._uU(11),t.qZA(),t.TgZ(12,"div",6),t.YNc(13,H,1,0,"span",7),t.YNc(14,X,1,0,"span",8),t.YNc(15,R,1,0,"span",9),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("ngSwitch",n.movieTimeData.theaterType),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(2),t.Q6J("ngIf",n.movieTimeData.remainSeats>10),t.xp6(1),t.Q6J("ngIf",n.movieTimeData.remainSeats<10&&0!==n.movieTimeData.remainSeats),t.xp6(1),t.Q6J("ngIf",0===n.movieTimeData.remainSeats),t.xp6(2),t.Oqu(n.movieTimeData.theater),t.xp6(2),t.Q6J("ngIf",n.movieTimeData.remainSeats>10),t.xp6(1),t.Q6J("ngIf",n.movieTimeData.remainSeats<10&&0!==n.movieTimeData.remainSeats),t.xp6(1),t.Q6J("ngIf",0===n.movieTimeData.remainSeats))},dependencies:[s.O5,s.RF,s.n9,s.uU],styles:[".line[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block;height:.125rem;width:75%}"]}),e})();function z(e,a){1&e&&(t.TgZ(0,"span",16),t._uU(1," \u666e\u904d\u7d1a "),t.qZA())}function V(e,a){1&e&&(t.TgZ(0,"span",17),t._uU(1," \u4fdd\u8b77\u7d1a "),t.qZA())}function tt(e,a){1&e&&(t.TgZ(0,"span",18),t._uU(1," \u8f14\u5c0e\u5341\u4e8c\u7d1a2 "),t.qZA())}function et(e,a){1&e&&(t.TgZ(0,"span",19),t._uU(1," \u8f14\u5c0e\u5341\u4e94\u7d1a "),t.qZA())}function it(e,a){1&e&&(t.TgZ(0,"span",20),t._uU(1," \u9650\u5236\u7d1a "),t.qZA())}function nt(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"li")(1,"app-movie-time",21),t.NdJ("scheduleIdEmit",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.scheduleIdOutput(o))}),t.qZA()()}if(2&e){const i=a.$implicit;t.xp6(1),t.Q6J("movieTimeData",i)}}let at=(()=>{class e{constructor(i){this.bookingService=i,this.movieData={movieId:"",title:"",posterUrl:"",rate:0,runtime:0,scheduleList:[]},this.clickMovieEmit=new t.vpe}ngOnInit(){}scheduleIdOutput(i){[{scheduleId:i},{movieId:this.movieData.movieId},{title:this.movieData.title}].forEach(o=>{const c=Object.keys(o)[0];this.bookingService.setShopCart(c,Object.values(o)[0])}),this.clickMovieEmit.emit(i)}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie"]],inputs:{movieData:"movieData"},outputs:{clickMovieEmit:"clickMovieEmit"},decls:19,vars:10,consts:[[1,"mr-4"],["alt","poster",1,"h-52","rounded-xl",3,"src"],[1,"flex-1"],[1,"flex","justify-between","items-center"],[1,"text-lg"],[1,"flex","items-center","text-xs","text-light-400","font-normal"],["src","assets/images/icon/time.svg","alt","time",1,"mr-2"],[1,"mr-2"],[3,"ngSwitch"],["class","text-success-100",4,"ngSwitchCase"],["class","text-info-200",4,"ngSwitchCase"],["class","text-warning-200",4,"ngSwitchCase"],["class","text-warning-300",4,"ngSwitchCase"],["class","text-warn-200",4,"ngSwitchCase"],[1,"grid","grid-cols-5","gap-3","mt-3"],[4,"ngFor","ngForOf"],[1,"text-success-100"],[1,"text-info-200"],[1,"text-warning-200"],[1,"text-warning-300"],[1,"text-warn-200"],[3,"movieTimeData","scheduleIdEmit"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.qZA(),t.TgZ(6,"div",5),t._UZ(7,"img",6),t.TgZ(8,"span",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t._uU(11," | "),t.YNc(12,z,2,0,"span",9),t.YNc(13,V,2,0,"span",10),t.YNc(14,tt,2,0,"span",11),t.YNc(15,et,2,0,"span",12),t.YNc(16,it,2,0,"span",13),t.qZA()()(),t.TgZ(17,"ul",14),t.YNc(18,nt,2,1,"li",15),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("src",n.movieData.posterUrl,t.LSH),t.xp6(4),t.Oqu(n.movieData.title),t.xp6(4),t.hij("",n.movieData.runtime," mins"),t.xp6(1),t.Q6J("ngSwitch",n.movieData.rate),t.xp6(2),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",6),t.xp6(1),t.Q6J("ngSwitchCase",12),t.xp6(1),t.Q6J("ngSwitchCase",15),t.xp6(1),t.Q6J("ngSwitchCase",18),t.xp6(2),t.Q6J("ngForOf",n.movieData.scheduleList))},dependencies:[s.sg,s.RF,s.n9,W]}),e})();function ot(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"app-date-select",8),t.NdJ("dateEmit",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.getScheduleList(o))}),t.qZA()()}if(2&e){const i=a.$implicit,n=a.index;t.xp6(1),t.Q6J("date",i)("dateIndex",n)}}function ct(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"li",11)(1,"app-movie",12),t.NdJ("clickMovieEmit",function(o){t.CHM(i);const c=t.oxw(2);return t.KtG(c.opneSeatPOP(o))}),t.qZA()()}if(2&e){const i=a.$implicit;t.xp6(1),t.Q6J("movieData",i)}}function st(e,a){if(1&e&&(t.TgZ(0,"ul",9),t.YNc(1,ct,2,1,"li",10),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.data)}}function rt(e,a){1&e&&(t.TgZ(0,"div",13),t._uU(1," \u6c92\u6709\u4efb\u4f55\u6642\u523b! "),t.qZA())}let pt=(()=>{class e{constructor(i,n,o){this.router=i,this.bookingService=n,this.matDialog=o,this.dateCount=7,this.dateArr=[],this.data=[],this.tempTime=""}ngOnInit(){this.dateArr=this.createDates(this.dateCount),this.getScheduleList(String(this.dateArr[0].getTime()))}getScheduleList(i){this.tempTime=i,this.bookingService.dateSelect$.next(i);const n=i,o=new Date(Number(n));o.setHours(23,59,59,999);const c=String(o.getTime());this.data=[],this.bookingService.v1StaffScheduleListGet$({startDate:n,endDate:c}).subscribe(l=>{this.data=l.data})}createDates(i){const n=[],o=new Date;for(var c=0;c<i;c++){var l=new Date(o);l.setDate(o.getDate()+c),l.setHours(0,0,0,0),n.push(l)}return n}opneSeatPOP(i){console.log("\u9ede\u9078\u5834\u6b21:",this.bookingService.getShopCart()),this.bookingService.v1StaffSeatScheduleIdGet$(i).subscribe(n=>{this.matDialog.open(q,{width:"80%",data:n.data})})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(u.F0),t.Y36(m.q),t.Y36(g.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-booking-page"]],decls:10,vars:3,consts:[[1,"bg-dark-200","px-4","py-3","flex","items-stretch"],[1,"date-div","grid","grid-cols-7","flex-1","bg-dark-400","rounded-2xl","p-2","border","border-light-600"],[4,"ngFor","ngForOf"],[1,"text-center","text-xs","text-light-400","px-3","ml-2","bg-dark-400","rounded-2xl","border","border-light-600","tracking-widest",3,"click"],["src","assets/images/icon/repeat.svg","alt","repeat",1,"mx-auto","mb-1"],[1,"movie-main","mr-2","mt-2"],[3,"ngIf","ngIfElse"],["noData",""],[3,"date","dateIndex","dateEmit"],[1,"px-4","py-1"],["class","bg-dark-400 rounded-2xl border border-light-600 tracking-widest my-3 p-4",4,"ngFor","ngForOf"],[1,"bg-dark-400","rounded-2xl","border","border-light-600","tracking-widest","my-3","p-4"],[1,"flex",3,"movieData","clickMovieEmit"],[1,"p-4"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,ot,2,2,"div",2),t.qZA(),t.TgZ(3,"button",3),t.NdJ("click",function(){return n.getScheduleList(n.tempTime)}),t._UZ(4,"img",4),t._uU(5," \u91cd\u8f09\u6642\u523b\u8868 "),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,st,2,1,"ng-template",6),t.YNc(8,rt,2,0,"ng-template",null,7,t.W1O),t.qZA()),2&i){const o=t.MAs(9);t.xp6(2),t.Q6J("ngForOf",n.dateArr),t.xp6(5),t.Q6J("ngIf",n.data.length>0)("ngIfElse",o)}},dependencies:[s.sg,s.O5,Y,at],styles:[".movie-main[_ngcontent-%COMP%]{height:calc(100% - 120px);overflow-y:scroll}.movie-main[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;background-color:transparent}.movie-main[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent;border-radius:20px}.movie-main[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#222;border-radius:20px}"]}),e})();const mt=[r(7392).Ps];let gt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,mt]}),e})();var ut=r(262),dt=r(2843),_t=r(8505),ht=r(9300),ft=r(4351);function vt(e,a){if(1&e&&t._UZ(0,"div",6),2&e){const i=t.oxw(2);t.ekj("bg-primary-500",i.stepperData[1].isActive)}}function Tt(e,a){if(1&e&&(t.TgZ(0,"li",2)(1,"span",3),t._uU(2),t.qZA(),t.TgZ(3,"p",4),t._uU(4),t.qZA(),t.YNc(5,vt,1,2,"div",5),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.ekj("stap-active",i.isActive),t.xp6(1),t.hij(" ",i.step," "),t.xp6(1),t.ekj("text-secondary-500",i.isActive),t.xp6(1),t.Oqu(i.title),t.xp6(1),t.Q6J("ngIf",1===i.step)}}let f=(()=>{class e{constructor(i){this.activatedRoute=i,this.stepperData=[{step:1,title:"\u9078\u64c7\u7968\u7a2e\u8207\u7968\u6578",isActive:!1},{step:2,title:"\u5283\u4f4d",isActive:!1}]}ngOnInit(){this.activatedRoute.url.subscribe(i=>{switch(i.join("/")){case p.F.BOOKING.TICKET_TYPE:this.stepperData[0].isActive=!0;break;case p.F.BOOKING.SELECT_SEAT:this.stepperData.forEach(o=>{o.isActive=!0})}})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-stepper"]],decls:2,vars:1,consts:[[1,"flex"],["class","flex text-xl items-center",4,"ngFor","ngForOf"],[1,"flex","text-xl","items-center"],[1,"bg-dark-100","text-light-300","rounded-full","py-2","px-4","mr-3"],[1,"text-light-300"],["class","w-36 h-0.5 bg-light-400 mx-3",3,"bg-primary-500",4,"ngIf"],[1,"w-36","h-0.5","bg-light-400","mx-3"]],template:function(i,n){1&i&&(t.TgZ(0,"ul",0),t.YNc(1,Tt,6,7,"li",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",n.stepperData))},dependencies:[s.sg,s.O5],styles:[".stap-active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(156 109 255 / var(--tw-bg-opacity));color:#fff}"]}),e})(),xt=(()=>{class e{constructor(i,n){this.bookingService=i,this.router=n,this.seatData={}}ngOnInit(){this.getSeatData()}getSeatData(){const i=this.bookingService.getShopCart();this.bookingService.v1StaffSeatScheduleIdGet$(i.scheduleId).subscribe(n=>{this.seatData=n.data})}complete(){const i=this.bookingService.getTempSeatArray(),n=this.bookingService.getShopCart();n.ticket.length-i.length>0||this.bookingService.v1StaffSeatCheckLockPost$().pipe((0,ut.K)(o=>(0,dt._)(o)),(0,_t.b)(o=>{o.data.forEach(c=>{this.bookingService.setShopCart("seat",c)}),this.bookingService.deleteTempSeatArray()},o=>{this.getSeatData(),this.bookingService.deleteTempSeatArray()}),(0,ht.h)(o=>1===o.code),(0,ft.b)(()=>this.bookingService.v1StaffTicketPost$())).subscribe(o=>{const c=n.ticket.map((l,At)=>({...l,ticketId:o.data[At]}));this.bookingService.deleteShopCart("ticket"),c.forEach(l=>{this.bookingService.setShopCart("ticket",l)}),console.log("\u5283\u4f4d\u5b8c\u5f8c",this.bookingService.getShopCart()),this.bookingService.setShopCartToLocal(!0),this.router.navigate([`/${p.F.BOOKING.ROOT}`])})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(m.q),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-select-seat"]],decls:9,vars:2,consts:[[1,"m-6"],[1,"mt-6","pt-6"],[3,"seatData","isPreview"],[1,"absolute","bottom-10","right-0","left-0","flex","justify-between","px-6","mx-6"],["mat-raised-button","","color","accent","type","button",1,"w-1/3","opacity-0"],["mat-raised-button","","color","primary","type","button",1,"w-1/3",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-stepper"),t.TgZ(2,"div",1),t._UZ(3,"app-seatchart",2),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t._uU(6," \u4e0a\u4e00\u6b65 "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.complete()}),t._uU(8," \u5b8c\u6210 "),t.qZA()()()),2&i&&(t.xp6(3),t.Q6J("seatData",n.seatData)("isPreview",!1))},dependencies:[f,h,d.lW]}),e})(),St=(()=>{class e{constructor(){this.ticketItem={_id:"",type:"",price:0},this.ticketControl=new t.vpe,this.ticketCounts=0}ngOnInit(){}changeTicketCounts(i){i>0&&10===this.ticketCounts||i<0&&0===this.ticketCounts||(this.ticketControl.emit({isAdd:i>0,ticketTypeId:this.ticketItem._id}),this.ticketCounts+=i)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-ticket-select"]],inputs:{ticketItem:"ticketItem"},outputs:{ticketControl:"ticketControl"},decls:11,vars:3,consts:[[1,"flex","items-center","justify-between","p-3","rounded-2xl","border","border-light-600","w-60","my-5"],[3,"click"],[1,"fa-solid","fa-minus","text-3xl","text-light-300"],[1,"fa-solid","fa-plus","text-3xl","text-light-300"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span",1),t.NdJ("click",function(){return n.changeTicketCounts(-1)}),t._UZ(6,"i",2),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.TgZ(9,"span",1),t.NdJ("click",function(){return n.changeTicketCounts(1)}),t._UZ(10,"i",3),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",n.ticketItem.type," "),t.xp6(2),t.hij(" ",n.ticketItem.price," "),t.xp6(4),t.hij(" ",n.ticketCounts," "))}}),e})();function kt(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"li")(1,"app-ticket-select",5),t.NdJ("ticketControl",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.ticketControl(o))}),t.qZA()()}if(2&e){const i=a.$implicit;t.xp6(1),t.Q6J("ticketItem",i)}}let Ct=(()=>{class e{constructor(i,n){this.router=i,this.bookingService=n,this.ticketTypeData=[],this.ticketData=[]}ngOnInit(){this.bookingService.v1StaffTicketTypeGet$().subscribe(i=>{this.ticketTypeData=i.data})}ticketControl(i){if(i.isAdd){const n=this.ticketTypeData.find(o=>o._id===i.ticketTypeId);this.ticketData.push({ticketId:"",ticketTypeId:n._id,ticketType:n.type,price:n.price})}else{const n=this.ticketData.findIndex(function(o){return o.ticketTypeId===i.ticketTypeId});-1!==n&&this.ticketData.splice(n,1)}}goSelectSeat(){this.ticketData.length<=0?alert("\u8acb\u9078\u64c7\u7968\u7a2e&\u7968\u6578"):(this.bookingService.deleteShopCart("ticket"),this.ticketData.forEach(i=>{this.bookingService.setShopCart("ticket",i)}),console.log("\u9078\u5247\u7968\u7a2e\u5f8c:",this.bookingService.getShopCart()),this.router.navigate([`/${p.F.BOOKING.ROOT}/${p.F.BOOKING.SELECT_SEAT}`]))}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(u.F0),t.Y36(m.q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-ticket-type"]],decls:7,vars:1,consts:[[1,"m-6"],[1,"pt-5"],[4,"ngFor","ngForOf"],[1,"absolute","bottom-10","right-10"],["mat-raised-button","","color","primary","type","button",1,"w-60",3,"click"],[3,"ticketItem","ticketControl"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-stepper"),t.TgZ(2,"ul",1),t.YNc(3,kt,2,1,"li",2),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.goSelectSeat()}),t._uU(6," \u4e0b\u4e00\u6b65 "),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("ngForOf",n.ticketTypeData))},dependencies:[s.sg,f,St,d.lW]}),e})();var bt=r(2385);const wt=[{path:"",component:pt},{path:p.F.BOOKING.TICKET_TYPE,component:Ct},{path:p.F.BOOKING.SELECT_SEAT,component:xt}],Zt=[d.ot];let yt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,u.Bz.forChild(wt),gt,bt.r,Zt]}),e})()}}]);