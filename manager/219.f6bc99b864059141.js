"use strict";(self.webpackChunkmanager=self.webpackChunkmanager||[]).push([[219],{6219:(ae,D,d)=>{d.r(D),d.d(D,{TheaterPageModule:()=>ne});var h=d(6895),l=d(4006),x=d(3456),f=d(8526),Y=d(2721),t=d(4650),U=d(3227),j=d(2843),w=d(9300),b=d(262),C=d(529),V=d(3796);class P extends C.mL{encodeKey(r){return(r=super.encodeKey(r)).replace(/\+/gi,"%2B")}encodeValue(r){return(r=super.encodeValue(r)).replace(/\+/gi,"%2B")}}const $=new t.OlP("basePath");class E{constructor(r={}){this.apiKeys=r.apiKeys,this.username=r.username,this.password=r.password,this.accessToken=r.accessToken,this.basePath=r.basePath,this.withCredentials=r.withCredentials}selectHeaderContentType(r){if(0==r.length)return;let e=r.find(n=>this.isJsonMime(n));return void 0===e?r[0]:e}selectHeaderAccept(r){if(0==r.length)return;let e=r.find(n=>this.isJsonMime(n));return void 0===e?r[0]:e}isJsonMime(r){const e=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!=r&&(e.test(r)||"application/json-patch+json"===r.toLowerCase())}}let z=(()=>{class o{constructor(e,n,a){this.httpClient=e,this.basePath="http://localhost:3005/",this.defaultHeaders=new C.WM,this.configuration=new E,n&&(this.basePath=n),a&&(this.configuration=a,this.basePath=n||a.basePath||this.basePath)}canConsumeForm(e){for(const a of e)if("multipart/form-data"===a)return!0;return!1}createTimetable(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling createTimetable.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("post",`${this.basePath}/v1/manager/timetable/create`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}deleteItem(e,n="body",a=!1){if(null==e)throw new Error("Required parameter timetableId was null or undefined when calling deleteItem.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);return null!=c&&(i=i.set("Accept",c)),this.httpClient.request("delete",`${this.basePath}/v1/manager/timetable/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}updateTimetable(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling updateTimetable.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("patch",`${this.basePath}/v1/manager/timetable/update`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerLoginPost(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling v1ManagerLoginPost.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("post",`${this.basePath}/v1/manager/login`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerMovieIdDelete(e,n="body",a=!1){if(null==e)throw new Error("Required parameter id was null or undefined when calling v1ManagerMovieIdDelete.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);return null!=c&&(i=i.set("Accept",c)),this.httpClient.request("delete",`${this.basePath}/v1/manager/movie/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerMovieIdGet(e,n="body",a=!1){if(null==e)throw new Error("Required parameter id was null or undefined when calling v1ManagerMovieIdGet.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);return null!=c&&(i=i.set("Accept",c)),this.httpClient.request("get",`${this.basePath}/v1/manager/movie/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerMovieListGet(e,n,a,i,s="body",c=!1){let p=new C.LE({encoder:new P});null!=e&&(p=p.set("status",e)),null!=n&&(p=p.set("searchDateS",n)),null!=a&&(p=p.set("searchDateE",a)),null!=i&&(p=p.set("title",i));let u=this.defaultHeaders;const _=this.configuration.selectHeaderAccept(["application/json"]);return null!=_&&(u=u.set("Accept",_)),this.httpClient.request("get",`${this.basePath}/v1/manager/movie/list`,{params:p,withCredentials:this.configuration.withCredentials,headers:u,observe:s,reportProgress:c})}v1ManagerMoviePatch(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling v1ManagerMoviePatch.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("patch",`${this.basePath}/v1/manager/movie`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerMoviePost(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling v1ManagerMoviePost.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("post",`${this.basePath}/v1/manager/movie`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerMovieStatusPut(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling v1ManagerMovieStatusPut.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("put",`${this.basePath}/v1/manager/movie/status`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerTimetableListGet(e,n,a="body",i=!1){let s=new C.LE({encoder:new P});null!=e&&(s=s.set("startDate",e)),null!=n&&(s=s.set("endDate",n));let c=this.defaultHeaders;const u=this.configuration.selectHeaderAccept(["application/json"]);return null!=u&&(c=c.set("Accept",u)),this.httpClient.request("get",`${this.basePath}/v1/manager/timetable/list`,{params:s,withCredentials:this.configuration.withCredentials,headers:c,observe:a,reportProgress:i})}v1ManagerUserProfilePost(e,n="body",a=!1){if(null==e)throw new Error("Required parameter body was null or undefined when calling v1ManagerUserProfilePost.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);null!=c&&(i=i.set("Accept",c));const u=this.configuration.selectHeaderContentType(["application/json"]);return null!=u&&(i=i.set("Content-Type",u)),this.httpClient.request("post",`${this.basePath}/v1/manager/user/profile`,{body:e,withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerUserProfileStaffIdGet(e,n="body",a=!1){if(null==e)throw new Error("Required parameter staffId was null or undefined when calling v1ManagerUserProfileStaffIdGet.");let i=this.defaultHeaders;const c=this.configuration.selectHeaderAccept(["application/json"]);return null!=c&&(i=i.set("Accept",c)),this.httpClient.request("get",`${this.basePath}/v1/manager/user/profile/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:n,reportProgress:a})}v1ManagerUserStickerStaffIdPostForm(e,n,a="body",i=!1){if(null==e)throw new Error("Required parameter upload was null or undefined when calling v1ManagerUserStickerStaffIdPost.");if(null==n)throw new Error("Required parameter staffId was null or undefined when calling v1ManagerUserStickerStaffIdPost.");let s=this.defaultHeaders;const p=this.configuration.selectHeaderAccept(["application/json"]);null!=p&&(s=s.set("Accept",p));let _,q=!1;return q=this.canConsumeForm(["multipart/form-data"]),_=q?new FormData:new C.LE({encoder:new P}),void 0!==e&&(_=_.append("upload",e)||_),this.httpClient.request("post",`${this.basePath}/v1/manager/user/sticker/${encodeURIComponent(String(n))}`,{body:_,withCredentials:this.configuration.withCredentials,headers:s,observe:a,reportProgress:i})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(C.eN),t.LFG($,8),t.LFG(E,8))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var M=(()=>{return(o=M||(M={}))[o.success=1]="success",o[o.systemError=-1]="systemError",M;var o})();let Z=(()=>{class o{constructor(e,n){this.http=e,this.managerService=n,this.isPopupInvalidMsg=!1,this.handleResponse=a=>{let i=!0;return a.code!==M.success&&(i=!1,!this.isPopupInvalidMsg&&a.message&&(this.isPopupInvalidMsg=!0,alert(a.message),setTimeout(()=>{this.isPopupInvalidMsg=!1}))),i},this.handleError=a=>(console.log("handleError"),a.error instanceof ErrorEvent?console.error("An error occurred:",a.error.message):console.error(`Backend returned code ${a.status}, body was: ${a.error}`),this.isPopupInvalidMsg||(this.isPopupInvalidMsg=!0,alert("\u7cfb\u7d71\u767c\u751f\u554f\u984c")),(0,j._)("Something bad happened; please try again later."))}getTheaterList(e,n,a,i,s,c,p){return this.request("get",{name:e,floor:n,type:a,capacityFrom:i,capacityTo:s,withDisabled:c,status:p},"theater/list")}getTheaterInfo(e){return this.request("get",{},`theater/${e}`)}createTheater(e){return this.request("post",e,"theater")}updateTheater(e,n){return this.request("patch",n,`theater/${e}`)}updateStatus(e,n){return this.request("patch",n,`theater/${e}/onoffline`)}deleteTheater(e){return this.request("delete",{},`theater/${e}`)}request(e,n,a){const i=this.getHTTPHeaders(),s=V.N.cinePosApi+"/v1/manager/"+a;switch(e){case"get":default:return this.http.get(s,{headers:i,params:n}).pipe((0,w.h)(this.handleResponse),(0,b.K)(this.handleError));case"delete":return this.http.delete(s,{headers:i,params:n}).pipe((0,w.h)(this.handleResponse),(0,b.K)(this.handleError));case"post":return this.http.post(s,n,{headers:i}).pipe((0,w.h)(this.handleResponse),(0,b.K)(this.handleError));case"patch":return this.http.patch(s,n,{headers:i}).pipe((0,w.h)(this.handleResponse),(0,b.K)(this.handleError));case"put":return this.http.put(s,n,{headers:i}).pipe((0,w.h)(this.handleResponse),(0,b.K)(this.handleError))}}getHTTPHeaders(){return new C.WM({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("token")})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(C.eN),t.LFG(z))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var J=d(7392),T=d(1948),y=d(9549),S=d(4385),v=d(3238),N=d(1281);let K=(()=>{class o{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,N.Ig)(e)}get inset(){return this._inset}set inset(e){this._inset=(0,N.Ig)(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(t.uIk("aria-orientation",n.vertical?"vertical":"horizontal"),t.ekj("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),o})(),X=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.BQ,v.BQ]}),o})();var k=d(4859),L=d(7974),F=d(6064),I=d(8302),H=d(6599),W=d(6459);function tt(o,r){if(1&o&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.name)}}function et(o,r){1&o&&(t.TgZ(0,"p",32),t._uU(1,"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u8cc7\u6599\uff01"),t.qZA())}function nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.updateStatus(!0,a._id))}),t._UZ(1,"mat-icon",47),t.TgZ(2,"span"),t._uU(3," \u767c\u4f48"),t.qZA()()}}function ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",35),t._uU(4),t.qZA(),t.TgZ(5,"td",36),t._uU(6),t.qZA(),t.TgZ(7,"td",37),t._uU(8),t.qZA(),t.TgZ(9,"td",38),t._uU(10),t.qZA(),t.TgZ(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",40)(14,"div",41)(15,"button",42),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openDetailPage(i._id))}),t._UZ(16,"mat-icon",43),t.TgZ(17,"span"),t._uU(18," \u6aa2\u8996"),t.qZA()(),t.TgZ(19,"button",42),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.openEditPage(i._id))}),t._UZ(20,"mat-icon",44),t.TgZ(21,"span"),t._uU(22," \u7de8\u8f2f"),t.qZA()(),t.TgZ(23,"button",42),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteTheater(i._id))}),t._UZ(24,"mat-icon",45),t.TgZ(25,"span"),t._uU(26," \u522a\u9664"),t.qZA()(),t.YNc(27,nt,4,0,"button",46),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.floor+"F"),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.totalCapacity),t.xp6(2),t.Oqu(e.wheelChairCapacity||"-"),t.xp6(2),t.Oqu(1===e.status?"\u5df2\u767c\u4f48":"\u66ab\u5b58"),t.xp6(15),t.Q6J("ngIf",0===e.status)}}function at(o,r){if(1&o&&(t.TgZ(0,"cine-table")(1,"thead")(2,"tr")(3,"th"),t._uU(4,"\u540d\u7a31"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"\u6a13\u5c64"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"\u985e\u578b"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"\u5e2d\u6b21"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\u8f2a\u6905\u5e2d\u6b21"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"\u72c0\u614b"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"\u529f\u80fd"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,ot,28,7,"tr",33),t.qZA()()),2&o){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.theaterListView)}}let Q=(()=>{class o{constructor(e,n,a,i){this.router=e,this.commonAPIService=n,this.theaterService=a,this.changeDetectorRef=i,this.theaterListView=[],this.pageSet1=new Y.n,this.typeOptions=[],this.theaterListApiData=[]}get theaterName(){return this.formGroup.get("theaterName")}get floor(){return this.formGroup.get("floor")}get theaterType(){return this.formGroup.get("theaterType")}get capacityFrom(){return this.formGroup.get("capacityFrom")}get capacityTo(){return this.formGroup.get("capacityTo")}get withDisabled(){return this.formGroup.get("withDisabled")}get status(){return this.formGroup.get("status")}ngOnInit(){this.initForm(),this.getOptionAPI(2),this.search()}initForm(){this.formGroup=new l.cw({theaterName:new l.NI(""),floor:new l.NI(""),theaterType:new l.NI(""),capacityFrom:new l.NI(""),capacityTo:new l.NI(""),withDisabled:new l.NI(""),status:new l.NI("")})}search(){if(this.formGroup.setErrors(null),this.formGroup.valid){let e=this.getSearchCondition();this.getListAPI(e)}else this.formGroup.markAllAsTouched(),alert("\u8acb\u6aa2\u67e5\u6b04\u4f4d\u662f\u5426\u6b63\u78ba\u586b\u5beb\uff01")}getSearchCondition(){return{name:this.theaterName?.value,floor:this.floor?.value,type:Array.isArray(this.theaterType.value)&&this.theaterType.value.length>0?this.theaterType.value.join(","):"",capacityFrom:this.capacityFrom?.value&&null!=this.capacityFrom?.value?this.capacityFrom?.value:"",capacityTo:this.capacityTo?.value&&null!=this.capacityTo?.value?this.capacityTo?.value:"",withDisabled:this.withDisabled?.value,status:this.status?.value}}selectAll(){const e=this.typeOptions.map(n=>n.value);this.formGroup.get("theaterType")?.setValue(e)}clearAll(){this.formGroup.get("theaterType")?.setValue([])}clearSelection(){this.formGroup.get("floor")?.setValue("")}handlePageEvent(e){console.log(e),this.pageSet1.currentPage=e.pageIndex+1,this.theaterListView=this.pageSet1.slicePage(this.theaterListApiData,this.pageSet1.currentPage,this.pageSet1.currentPageSize),this.changeDetectorRef.detectChanges()}openDetailPage(e){this.router.navigate([f.F.THEATER,e])}openEditPage(e){this.router.navigate([f.F.THEATER,f.F.DETAIL,f.F.EDIT,e])}deleteTheater(e){this.theaterService.deleteTheater(e).subscribe(n=>{console.log("\u522a\u9664\u5f71\u5ef3-\u6210\u529fres",n),alert("\u522a\u9664\u5f71\u5ef3-\u6210\u529f"),this.getListAPI(this.getSearchCondition())})}updateStatus(e,n){this.theaterService.updateStatus(n,{status:e?1:0}).subscribe(c=>{console.log("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529fres",c),alert("\u66f4\u65b0\u4e0a\u67b6\u72c0\u614b-\u6210\u529f"),this.getListAPI(this.getSearchCondition())})}getOptionAPI(e){this.commonAPIService.getOption(e).subscribe(n=>{console.log(e,"\u53d6\u5f97\u9078\u9805\u8cc7\u6599-\u6210\u529fres",n),this.typeOptions=n.data,this.changeDetectorRef.detectChanges()})}getListAPI(e){this.theaterService.getTheaterList(e.name,e.floor,e.type,e.capacityFrom,e.capacityTo,e.withDisabled,e.status).subscribe(n=>{console.log("\u53d6\u5f97\u5217\u8868\u8cc7\u6599-\u6210\u529fres",n),this.theaterListApiData=n.data,this.theaterListView=this.pageSet1.slicePage(this.theaterListApiData,this.pageSet1.currentPage,this.pageSet1.currentPageSize),this.pageSet1.initialize(this.theaterListApiData.length),this.changeDetectorRef.detectChanges()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.F0),t.Y36(U.a),t.Y36(Z),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-theater-list-page"]],decls:91,vars:16,consts:[[1,"w-full","px-[20px]"],[1,"wrapper-page","form-common-back","utility-common-back",3,"formGroup"],[1,"mb-[30px]"],[1,"row"],[1,"form-title"],[1,"form-content"],["type","text","formControlName","theaterName",1,"form-input","w-[300px]"],[1,"form-select","select-small"],["appearance","fill",1,"w-[300px]"],["formControlName","floor"],[3,"value"],[1,"etc-select-action"],["mat-button","",1,"etc-select-action-button",3,"click"],["fontIcon","remove_circle_outline"],[1,"form-select"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterType","multiple",""],[3,"value",4,"ngFor","ngForOf"],["fontIcon","check_box_outline"],["fontIcon","check_box_outline_blank"],["type","number","formControlName","capacityFrom",1,"form-input","w-[150px]"],["type","number","formControlName","capacityTo",1,"form-input","w-[150px]"],[1,"form-content",2,"display","flex"],[1,"form-radio","list-row","text-[12px]"],["aria-label","Select an option","formControlName","withDisabled"],[1,"mr-[25px]",3,"value"],["aria-label","Select an option","formControlName","status"],[1,"flex",2,"justify-content","right"],["mat-raised-button","","color","primary","type","submit",3,"click"],["class","p-50 text-center",4,"ngIf"],[4,"ngIf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","showFirstLastButtons","pageIndex","page"],["paginator",""],[1,"p-50","text-center"],[4,"ngFor","ngForOf"],["data-title","\u540d\u7a31"],["data-title","\u6a13\u5c64"],["data-title","\u985e\u578b"],["data-title","\u5e2d\u6b21"],["data-title","\u8f2a\u6905\u5e2d\u6b21"],["data-title","\u72c0\u614b"],["data-title","\u529f\u80fd",1,"w-[300px]"],[1,"button-container"],["mat-button","",1,"left-aligned-button",3,"click"],["fontIcon","remove_red_eye"],["fontIcon","edit"],["fontIcon","delete"],["mat-button","","class","left-aligned-button",3,"click",4,"ngIf"],["fontIcon","publish"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"cine-card",2)(3,"cine-card-header"),t._uU(4,"\u67e5\u8a62\u689d\u4ef6"),t.qZA(),t.TgZ(5,"cine-card-content")(6,"div",3)(7,"span",4),t._uU(8,"\u540d\u7a31"),t.qZA(),t.TgZ(9,"div",5),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"span",4),t._uU(12,"\u6a13\u5c64"),t.qZA(),t.TgZ(13,"div",5)(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(18,"mat-select",9)(19,"mat-option",10),t._uU(20,"1F"),t.qZA(),t.TgZ(21,"mat-option",10),t._uU(22,"2F"),t.qZA(),t.TgZ(23,"mat-option",10),t._uU(24,"3F"),t.qZA(),t.TgZ(25,"mat-option",10),t._uU(26,"4F"),t.qZA(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",11)(29,"button",12),t.NdJ("click",function(){return n.clearSelection()}),t._UZ(30,"mat-icon",13),t.TgZ(31,"span"),t._uU(32," \u6e05\u9664"),t.qZA()()()()()()()(),t.TgZ(33,"div",3)(34,"span",4),t._uU(35,"\u985e\u578b"),t.qZA(),t.TgZ(36,"div",5)(37,"div",14)(38,"mat-form-field",8)(39,"mat-label"),t._uU(40,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(41,"mat-select",15),t.YNc(42,tt,2,2,"mat-option",16),t._UZ(43,"mat-divider"),t.TgZ(44,"div",11)(45,"button",12),t.NdJ("click",function(){return n.selectAll()}),t._UZ(46,"mat-icon",17),t.TgZ(47,"span"),t._uU(48," \u5168\u9078"),t.qZA()(),t.TgZ(49,"button",12),t.NdJ("click",function(){return n.clearAll()}),t._UZ(50,"mat-icon",18),t.TgZ(51,"span"),t._uU(52," \u5168\u4e0d\u9078"),t.qZA()()()()()()(),t.TgZ(53,"span",4),t._uU(54,"\u5e2d\u6b21"),t.qZA(),t.TgZ(55,"div",5),t._UZ(56,"input",19),t._uU(57," \uff5e "),t._UZ(58,"input",20),t.qZA()(),t.TgZ(59,"div",3)(60,"span",4),t._uU(61,"\u6b98\u969c\u5ea7\u4f4d"),t.qZA(),t.TgZ(62,"div",21)(63,"div",22)(64,"mat-radio-group",23)(65,"mat-radio-button",24),t._uU(66,"\u6709"),t.qZA(),t.TgZ(67,"mat-radio-button",24),t._uU(68,"\u7121"),t.qZA()()()(),t.TgZ(69,"span",4),t._uU(70,"\u72c0\u614b"),t.qZA(),t.TgZ(71,"div",21)(72,"div",22)(73,"mat-radio-group",25)(74,"mat-radio-button",24),t._uU(75,"\u5df2\u767c\u4f48"),t.qZA(),t.TgZ(76,"mat-radio-button",24),t._uU(77,"\u66ab\u5b58"),t.qZA()()()()(),t.TgZ(78,"div",26)(79,"button",27),t.NdJ("click",function(){return n.search()}),t._uU(80,"\u67e5\u8a62"),t.qZA()()()(),t.TgZ(81,"cine-card")(82,"cine-card-header"),t._uU(83,"\u67e5\u8a62\u7d50\u679c"),t.qZA(),t.TgZ(84,"cine-card-content"),t.YNc(85,et,2,0,"p",28),t.YNc(86,at,19,1,"cine-table",29),t.TgZ(87,"mat-paginator",30,31),t.NdJ("page",function(i){return n.handlePageEvent(i)}),t.qZA()()(),t.TgZ(89,"span"),t._uU(90,"\xa0"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(18),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(17),t.Q6J("ngForOf",n.typeOptions),t.xp6(23),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(7),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(9),t.Q6J("ngIf",!(null!=n.theaterListView&&n.theaterListView.length)),t.xp6(1),t.Q6J("ngIf",null==n.theaterListView?null:n.theaterListView.length),t.xp6(1),t.Q6J("length",n.pageSet1.totalCounts)("pageSize",n.pageSet1.currentPageSize)("showFirstLastButtons",!0)("pageIndex",n.pageSet1.currentPage-1))},dependencies:[h.sg,h.O5,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,J.Hw,T.VQ,T.U0,y.KE,y.hX,S.gD,v.ey,K,k.lW,L.NW,F.A,I.g,H.n,W.a],styles:[".form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{width:20%;font-weight:400;font-size:13px;color:#ddd}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{width:80%;min-height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:48px;padding:16px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-input.input-textarea[_ngcontent-%COMP%]{height:200px!important;width:100%!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field{font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:16px 12px!important;padding-bottom:12px;border-radius:16px!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0;border-top:0}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select-arrow-wrapper{margin-top:10px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrappe{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted.mat-form-field-empty.mat-empty{display:inline-block!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container{height:15px;width:15px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle, .utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{border-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle{height:15px;width:15px;border-width:1px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{height:15px;width:15px;background-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio.list-row[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:center}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]   .list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utility-common-back[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{border-top:0!important;display:flex;align-items:center;height:48px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0 12px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{margin-right:5px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline, .utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper{display:none}.utility-common-back[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;letter-spacing:.1em;text-align:center;font-weight:500;font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .btn.gray[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#ffffff80}.utility-common-back[_ngcontent-%COMP%]   .btn.small[_ngcontent-%COMP%]{border-radius:4px;height:30px}.utility-common-back[_ngcontent-%COMP%]   .btn.medium[_ngcontent-%COMP%]{border-radius:6px;height:42px}.etc-select-action[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.etc-select-action-button[_ngcontent-%COMP%]{font-size:12px;flex:1}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.left-aligned-button[_ngcontent-%COMP%]{font-size:12px}"]}),o})();var g=(()=>{return(o=g||(g={}))[o.createMap=0]="createMap",o[o.seatMapSetting=1]="seatMapSetting",o[o.rank=2]="rank",o[o.seatTypeSetting=3]="seatTypeSetting",g;var o})(),A=d(5412);let rt=(()=>{class o{constructor(e){this.dialogRef=e}ngOnInit(){}chooseType(e){this.dialogRef.close(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-select-seat-type-dialog"]],decls:17,vars:0,consts:[[1,"text-center"],[1,"my-4"],[1,"text-lg"],[1,"dialog-content","mt-10"],["mat-dialog-close","",1,"dialog-button",3,"click"],["src","assets/images/icon/seat-wheelchair.svg","alt","handicapped",1,"h-full","mx-auto"],[1,"button-text"],["src","assets/images/icon/seat-no.svg","alt","no"],["src","assets/images/icon/seat-default.svg","alt","default"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"\u9078\u64c7\u7279\u6b8a\u5ea7\u4f4d\u985e\u578b"),t.qZA()(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.chooseType("1")}),t._UZ(6,"img",5),t.TgZ(7,"div",6),t._uU(8,"\u8f2a\u6905\u4f4d"),t.qZA()(),t.TgZ(9,"button",4),t.NdJ("click",function(){return n.chooseType("-1")}),t._UZ(10,"img",7),t.TgZ(11,"div",6),t._uU(12,"\u6545\u969c"),t.qZA()(),t.TgZ(13,"button",4),t.NdJ("click",function(){return n.chooseType("0")}),t._UZ(14,"img",8),t.TgZ(15,"div",6),t._uU(16,"\u9810\u8a2d\u503c"),t.qZA()()()())},dependencies:[A.ZT],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px}.dialog-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.button-text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px}"]}),o})();var m=(()=>{return(o=m||(m={}))[o.showOrNot=0]="showOrNot",o[o.seatType=1]="seatType",o[o.disable=2]="disable",m;var o})();function it(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t._UZ(1,"img",7),t.qZA()}}function st(o,r){1&o&&(t.TgZ(0,"div",8),t._UZ(1,"img",7),t.qZA())}function ct(o,r){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"img",7),t.qZA())}function lt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,it,2,0,"div",3),t.YNc(2,st,2,0,"div",4),t.YNc(3,ct,2,0,"div",5),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}function pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t._UZ(1,"img",10),t.qZA()}}function dt(o,r){1&o&&(t.TgZ(0,"div",8),t._UZ(1,"img",10),t.qZA())}function ut(o,r){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"img",10),t.qZA())}function gt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,pt,2,0,"div",3),t.YNc(2,dt,2,0,"div",4),t.YNc(3,ut,2,0,"div",5),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}function ht(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t.qZA()}}function mt(o,r){1&o&&t._UZ(0,"div",14)}function ft(o,r){if(1&o&&(t.ynx(0),t.YNc(1,ht,1,0,"div",11),t.YNc(2,mt,1,0,"div",12),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",1===e.seatSetting)}}function _t(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.active())}),t.qZA()}}function Ct(o,r){1&o&&t._UZ(0,"div",8)}function xt(o,r){1&o&&t._UZ(0,"div",9)}function wt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,_t,1,0,"div",3),t.YNc(2,Ct,1,0,"div",4),t.YNc(3,xt,1,0,"div",5),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",2!=e.seatSetting&&4!=e.seatSetting),t.xp6(1),t.Q6J("ngIf",2===e.seatSetting),t.xp6(1),t.Q6J("ngIf",4===e.seatSetting)}}let B=(()=>{class o{constructor(e){this.dialog=e,this.seatIndex=0,this.showType="0",this.activeOut=new t.vpe,this.type="0"}ngOnInit(){this.type=this.showType}active(){switch(this.seatSetting){case m.showOrNot:this.type="0"===this.type?"N":"0",this.activeOut.emit({seatIndex:this.seatIndex,type:this.type});break;case m.seatType:this.dialog.open(rt,{width:"50%",height:"28%"}).afterClosed().subscribe(n=>{this.type=n||this.type,this.activeOut.emit({seatIndex:this.seatIndex,type:this.type})})}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-manager-seatchart-seat"]],inputs:{seatIndex:"seatIndex",showType:"showType",seatSetting:"seatSetting"},outputs:{activeOut:"activeOut"},decls:5,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","seat seat-free",3,"click",4,"ngIf"],["class","seat seat-sold",4,"ngIf"],["class","seat seat-free-show",4,"ngIf"],[1,"seat","seat-free",3,"click"],["src","assets/images/icon/no.svg","alt","no",1,"h-full","mx-auto"],[1,"seat","seat-sold"],[1,"seat","seat-free-show"],["src","assets/images/icon/handicapped.png","alt","handicapped",1,"h-full","mx-auto"],["class","seat seat-none",3,"click",4,"ngIf"],["class","seat seat-none",4,"ngIf"],[1,"seat","seat-none",3,"click"],[1,"seat","seat-none"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,lt,4,3,"ng-container",1),t.YNc(2,gt,4,3,"ng-container",1),t.YNc(3,ft,3,2,"ng-container",1),t.YNc(4,wt,4,3,"ng-container",2),t.qZA()),2&e&&(t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","-1"),t.xp6(1),t.Q6J("ngSwitchCase","1"),t.xp6(1),t.Q6J("ngSwitchCase","N"))},dependencies:[h.O5,h.RF,h.n9,h.ED],styles:[".seat[_ngcontent-%COMP%]{height:1.75rem;width:100%;border-radius:.5rem .5rem .375rem .375rem;padding:.25rem}.seat-free[_ngcontent-%COMP%]{cursor:pointer;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-free[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(148 163 184 / var(--tw-bg-opacity))}.seat-free-show[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.seat-lock[_ngcontent-%COMP%], .seat-sold[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.seat-none[_ngcontent-%COMP%]{background-color:transparent}.active-seat[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity))}.step1-none[_ngcontent-%COMP%]{cursor:pointer;border-width:1px;--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity))}.step1-none[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}"]}),o})();function bt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",12)(1,"input",13),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.convertToUpperCase())})("ngModelChange",function(a){const s=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.rowsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=r.$implicit,n=r.index,a=t.oxw(2);t.xp6(1),t.s9C("value",e),t.Q6J("disabled",a.step!==a.Step.rank)("ngModel",a.rowsOrder[n])}}function Tt(o,r){if(1&o&&(t.TgZ(0,"ul"),t.YNc(1,bt,2,3,"li",11),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)("ngForTrackBy",e.trackByIndex)}}function vt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",17)(1,"app-manager-seatchart-seat",18),t.NdJ("activeOut",function(a){t.CHM(e);const i=t.oxw(3);return t.KtG(i.activeOut(a))}),t.qZA()()}if(2&o){const e=r.index,n=t.oxw().index,a=t.oxw(2);t.xp6(1),t.Q6J("seatIndex",n*a.colsArr.length+e)("seatSetting",a.seatSetting)("showType",a.responseArr[n*a.colsArr.length+e])}}function Mt(o,r){if(1&o&&(t.TgZ(0,"li")(1,"ul",15),t.YNc(2,vt,2,3,"li",16),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.colsArr)}}function yt(o,r){if(1&o&&(t.TgZ(0,"ul",9),t.YNc(1,Mt,3,1,"li",14),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.rowsArr)}}function At(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"input",21,22),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.colsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=r.$implicit,n=r.index,a=t.oxw(2);t.xp6(1),t.s9C("value",e),t.Q6J("disabled",a.step!==a.Step.rank)("ngModel",a.colsOrder[n])}}function Ot(o,r){if(1&o&&(t.TgZ(0,"ul",19),t.YNc(1,At,3,3,"li",20),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.colsOrder)("ngForTrackBy",e.trackByIndex)}}let G=(()=>{class o{constructor(e){this.fb=e,this.Step=g,this.responseArr=[],this.rowsArr=[],this.colsArr=[],this.rowsOrder=[],this.colsOrder=[],this.lastType=!0,this.type=!0,this.step=g.createMap,this.fg=new t.vpe}ngOnInit(){this.validateForm=this.fb.group({seatMap:[],rowLabel:[],colLabel:[]}),this.fg.emit(this.validateForm)}setSeatChart(e,n,a){this.rowsArr=Array(n.length).fill("0"),this.colsArr=Array(a.length).fill("0"),this.responseArr=e,this.rowsOrder=n,this.colsOrder=a,this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}seatChartGenerator(e,n,a){console.log("seatChartGenerator"),this.responseArr=Array(n*e).fill("0"),this.rowsArr=Array(n).fill("0"),this.colsArr=Array(e).fill("0"),this.type=a,this.rowsOrder=this.createRowsOrder(n,a),this.colsOrder=this.createRowsOrder(e,!1),this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}setSeatSettingType(e){this.seatSetting=e}activeOut(e){this.responseArr[e.seatIndex]=e.type,console.log(e.seatIndex),console.log(this.responseArr),this.validateForm.get("seatMap")?.patchValue(this.responseArr),this.validateForm.get("rowLabel")?.patchValue(this.rowsOrder),this.validateForm.get("colLabel")?.patchValue(this.colsOrder)}trackByIndex(e,n){return e}convertToUpperCase(){for(let e=0;e<this.rowsOrder.length;e++)this.rowsOrder[e]=this.rowsOrder[e].toUpperCase()}selectAllText(){document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}createRowsOrder(e,n){const a=[],i="A".charCodeAt(0);for(let s=0;s<e;s++){const c=n?String.fromCharCode(i+s):String(s+1);a.push(c)}return a}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-step2"]],inputs:{step:"step"},outputs:{fg:"fg"},decls:12,vars:3,consts:[[1,"w-full"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pb-0"],[4,"ngIf"],["class","flex-1",4,"ngIf"],[1,"flex","w-full","px-5","mt-0.5","mb-3"],[1,"w-14"],[2,"display","none"],[1,"flex-1"],["class","flex justify-between",4,"ngIf"],["class","mx-3 my-0.5",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","my-0.5"],[1,"w-8","h-7","p-1","mb-1","flex","justify-center","items-center","text-center","row-rank",3,"disabled","value","ngModel","input","ngModelChange","click"],[4,"ngFor","ngForOf"],[1,"flex"],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatIndex","seatSetting","showType","activeOut"],[1,"flex","justify-between"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","text-center","h-6","col-rank",3,"disabled","value","ngModel","ngModelChange","click"],["inputRef","ngModel"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,Tt,2,2,"ul",4),t.YNc(6,yt,2,1,"ul",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"span",8),t.qZA(),t.TgZ(10,"div",9),t.YNc(11,Ot,2,2,"ul",10),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",n.colsArr.length>0),t.xp6(1),t.Q6J("ngIf",n.step!==n.Step.createMap),t.xp6(5),t.Q6J("ngIf",n.rowsArr.length>0))},dependencies:[h.sg,h.O5,l.Fj,l.JJ,l.On,B],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.row-rank[_ngcontent-%COMP%]{color:#9c6dff;border:1px solid #9C6DFF;background:#1A1A1A}.row-rank[_ngcontent-%COMP%]:disabled{border:0px;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity));background:unset}.col-rank[_ngcontent-%COMP%]{color:#71ddff;border:1px solid #71DDFF;font-size:60%;background:#1A1A1A}.col-rank[_ngcontent-%COMP%]:disabled{border:0px;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity));background:unset}"]}),o})();function Pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.handleOptionSelected(i))}),t._uU(1),t.qZA()}if(2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(null==e?null:e.name)}}function Zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",0)(1,"button",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("back"))}),t._UZ(2,"img",37),t.qZA(),t.TgZ(3,"div",38),t._uU(4,"\u4e0a\u4e00\u6b65"),t.qZA()()}}function St(o,r){1&o&&t._UZ(0,"div",0)}function kt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",39),t._uU(2,"\u4e0b\u4e00\u6b65"),t.qZA(),t.TgZ(3,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("next"))}),t._UZ(4,"img",41),t.qZA()()}}function Ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",0)(1,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onPositiveClick("finish"))}),t._uU(2,"\u5b8c\u6210"),t.qZA()()}}let R=(()=>{class o{constructor(e,n,a,i,s,c){this.commonAPIService=e,this.changeDetectorRef=n,this.theaterService=a,this.route=i,this.router=s,this.fb=c,this.isEdit=!1,this.Step=g,this.theaterId="",this.typeOptions=[],this.row=0,this.col=0,this.type=!0,this.step=g.createMap,this.selectedText="",this.seatMap=[],this.rowLabel=[],this.colLabel=[]}ngOnInit(){this.initForm(),this.isEdit="edit"===this.route.snapshot?.url[1]?.path,console.log("isEdit",this.isEdit,this.route.snapshot),this.getOptionAPI(2),this.isEdit?(this.theaterId=this.route.snapshot.params.id,this.getTheaterInfoAPI()):this.formGroup.get("rowType")?.setValue(1)}ngAfterViewInit(){console.log(this.step2),this.changeDetectorRef.detectChanges()}handleChange(){this.inputRow=Math.ceil(this.inputRow),this.inputCol=Math.ceil(this.inputCol)}initForm(){this.formGroup=this.fb.group({theaterName:["",[l.kI.required]],theaterFloor:["",[l.kI.required]],theaterType:["",[l.kI.required]],row:["",[l.kI.required,l.kI.pattern("[0-9]*")]],col:["",[l.kI.required,l.kI.pattern("[0-9]*")]],rowType:[!0],step2:this.fb.group({})})}setForm(e){if(this.isEdit){const n=this.parseTheaterType(e.rowLabel);this.formGroup.patchValue({theaterName:e.name,theaterFloor:e.floor,theaterType:e.type,row:e.row,col:e.col,rowType:n?1:0,step2:{seatMap:e.seatMap,rowLabel:e.rowLabel,colLabel:e.colLabel}})}this.changeDetectorRef.detectChanges(),console.log("formGroup- \u5e36\u503c",this.formGroup)}parseTheaterType(e){const n=e,a=n.filter(c=>/[A-Za-z]/.test(c)),i=n.filter(c=>/\d/.test(c));return a.length>i.length}addForm(e,n){this.formGroup.setControl(n,e)}onPositiveClick(e){switch(e){case"next":this.nextStep();break;case"back":this.lastStep();break;case"finish":this.finish()}}nextStep(){switch(this.step){case g.createMap:if(this.formGroup.invalid)return void alert("\u8acb\u586b\u5beb\u6240\u6709\u6b04\u4f4d");if(this.isEdit)this.seatMap=this.formGroup.get("step2.seatMap")?.value,this.rowLabel=this.formGroup.get("step2.rowLabel")?.value,this.colLabel=this.formGroup.get("step2.colLabel")?.value,this.step2?.setSeatChart(this.seatMap,this.rowLabel,this.colLabel);else{const e=this.formGroup.get("row")?.value,n=this.formGroup.get("col")?.value,a=this.formGroup.get("rowType")?.value;this.step2?.seatChartGenerator(n,e,a)}this.step2?.setSeatSettingType(m.showOrNot),this.formGroup.disable(),this.step++;break;case g.seatMapSetting:this.step2?.setSeatSettingType(m.disable),this.step++;break;case g.rank:this.step2?.setSeatSettingType(m.seatType),this.step++;break;case g.seatTypeSetting:this.step2?.setSeatSettingType(m.disable)}}lastStep(){switch(this.step--,this.step){case g.createMap:this.formGroup.enable(),this.step2?.setSeatSettingType(m.disable);break;case g.seatMapSetting:this.step2?.setSeatSettingType(m.showOrNot);break;case g.rank:this.step2?.setSeatSettingType(m.disable);break;case g.seatTypeSetting:this.step2?.setSeatSettingType(m.seatType)}}handleOptionSelected(e){this.selectedText=e?.name}getSeatMapResult(e){this.seatMap=e.seatMap,this.rowLabel=e.rowLabel,this.colLabel=e.colLabel}finish(){console.log("=== get result ===");const e=this.formGroup.getRawValue();console.log(e);let n=0,a=0;for(const s of e.step2.seatMap)"N"!=s&&n++,"1"===s&&a++;let i={name:e.theaterName,type:e.theaterType,floor:e.theaterFloor,totalCapacity:n,wheelChairCapacity:a,row:e.row,col:e.col,rowLabel:e.step2.rowLabel,colLabel:e.step2.colLabel,seatMap:e.step2.seatMap};this.isEdit?this.patchUpdateTheaterAPI(i):(i={...i,status:0},this.postCreateTheaterAPI(i))}getOptionAPI(e){this.commonAPIService.getOption(e).subscribe(n=>{console.log(e,"\u53d6\u5f97\u9078\u9805\u8cc7\u6599-\u6210\u529fres",n),this.typeOptions=n.data,this.changeDetectorRef.detectChanges()})}getTheaterInfoAPI(){setTimeout(()=>{this.theaterService.getTheaterInfo(this.theaterId).subscribe(e=>{console.log(e),this.changeDetectorRef.detectChanges(),this.setForm(e.data),this.nextStep()})})}postCreateTheaterAPI(e){this.theaterService.createTheater(e).subscribe(n=>{console.log("\u65b0\u589e\u5f71\u5ef3\u8cc7\u8a0a-\u6210\u529fres",n),this.router.navigate([f.F.THEATER,n.data.theater._id]),alert(n.message)})}patchUpdateTheaterAPI(e){this.theaterService.updateTheater(this.theaterId,e).subscribe(n=>{console.log("\u66f4\u65b0\u5f71\u5ef3\u8cc7\u8a0a-\u6210\u529fres",n),this.router.navigate([f.F.THEATER,this.theaterId]),alert(n.message)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.a),t.Y36(t.sBO),t.Y36(Z),t.Y36(x.gz),t.Y36(x.F0),t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-theater-detail-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(G,5),2&e){let a;t.iGM(a=t.CRH())&&(n.step2=a.first)}},decls:83,vars:17,consts:[[1,"flex-container"],[1,"w-[30%]","px-[20px]"],[1,"wrapper-page","form-common-back","utility-common-back",3,"formGroup"],[1,"mb-[30px]"],[1,"mb-[20px]",2,"font-size","14px"],[1,"row"],[1,"form-title"],[1,"form-content"],["type","text","formControlName","theaterName",1,"form-input"],[1,"form-select","select-small"],["appearance","fill"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterFloor"],[3,"value"],[1,"form-select"],["placeholder","\u8acb\u9078\u64c7","formControlName","theaterType"],[3,"value","click",4,"ngFor","ngForOf"],[1,"mt-[30px]",2,"font-size","14px"],[1,"text-right"],[1,"form-content","ml-[20px]",2,"display","flex"],[1,"form-radio","list-row","text-[13px]"],["aria-label","Select an option","formControlName","rowType"],[1,"mr-[25px]",3,"value"],["type","number","min","1","formControlName","row",1,"form-input",3,"ngModel","ngModelChange","input"],["type","number","min","1","formControlName","col",1,"form-input",3,"ngModel","ngModelChange","input"],[1,"flex",2,"justify-content","right"],["mat-raised-button","","color","primary","type","submit",1,"w-2/3",3,"disabled","click"],[1,"w-[70%]","pr-[20px]",3,"hidden"],[1,"wrapper-page","form-common-back","utility-common-back"],[1,"text-center","mb-[30px]",2,"font-size","14px"],[3,"step","fg"],[1,"w-fill"],[1,"px-[20px]"],[3,"ngIf","ngIfElse"],["showBlank",""],["class","flex-container",4,"ngIf"],[3,"value","click"],["mat-raised-button","","color","accent",1,"secondary","btn-icon","mr-[10px]",3,"click"],["src","assets/images/icon/arrowR.svg","alt","arrow"],[1,"mt-[10px]","ml-[8px]"],[1,"mt-[10px]","mr-[8px]"],["mat-raised-button","","color","primary",1,"secondary","btn-icon","mr-[10px]",3,"click"],["src","assets/images/icon/arrowL.svg","alt","arrow"],["mat-raised-button","","color","primary","type","submit",1,"w-1/6",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"cine-card",3)(4,"cine-card-header",4),t._uU(5,"\u57fa\u790e\u8cc7\u8a0a"),t.qZA(),t.TgZ(6,"cine-card-content")(7,"div",5)(8,"span",6),t._uU(9,"\u540d\u7a31"),t.qZA(),t.TgZ(10,"div",7),t._UZ(11,"input",8),t.qZA()(),t.TgZ(12,"div",5)(13,"span",6),t._uU(14,"\u6a13\u5c64"),t.qZA(),t.TgZ(15,"div",7)(16,"div",9)(17,"mat-form-field",10)(18,"mat-label"),t._uU(19,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(20,"mat-select",11)(21,"mat-option",12),t._uU(22,"1F"),t.qZA(),t.TgZ(23,"mat-option",12),t._uU(24,"2F"),t.qZA(),t.TgZ(25,"mat-option",12),t._uU(26,"3F"),t.qZA(),t.TgZ(27,"mat-option",12),t._uU(28,"4F"),t.qZA()()()()()(),t.TgZ(29,"div",5)(30,"span",6),t._uU(31,"\u985e\u578b"),t.qZA(),t.TgZ(32,"div",7)(33,"div",13)(34,"mat-form-field",10)(35,"mat-label"),t._uU(36,"\u8acb\u9078\u64c7"),t.qZA(),t.TgZ(37,"mat-select",14),t.YNc(38,Pt,2,2,"mat-option",15),t.qZA()()()()(),t.TgZ(39,"cine-card-header",16)(40,"div",0)(41,"div"),t._uU(42," \u5ea7\u4f4d\u6578\u91cf "),t.qZA(),t.TgZ(43,"div",17),t._uU(44," \u203b\u8d70\u9053\u4e5f\u7b971\u884c/\u5217 "),t.qZA()()(),t.TgZ(45,"div",5)(46,"span",6),t._uU(47,"\u76f4\u6392\u724c\u865f"),t.qZA(),t.TgZ(48,"div",18)(49,"div",19)(50,"mat-radio-group",20)(51,"mat-radio-button",21),t._uU(52,"A ~ Z"),t.qZA(),t.TgZ(53,"mat-radio-button",21),t._uU(54,"1, 2, 3..."),t.qZA()()()()(),t.TgZ(55,"div",5)(56,"span",6),t._uU(57,"\u76f4\u6392\u683c\u6578"),t.qZA(),t.TgZ(58,"div",7)(59,"input",22),t.NdJ("ngModelChange",function(i){return n.inputRow=i})("input",function(){return n.handleChange()}),t.qZA()()(),t.TgZ(60,"div",5)(61,"span",6),t._uU(62,"\u6a6b\u6392\u683c\u6578"),t.qZA(),t.TgZ(63,"div",7)(64,"input",23),t.NdJ("ngModelChange",function(i){return n.inputCol=i})("input",function(){return n.handleChange()}),t.qZA()()(),t.TgZ(65,"div",24)(66,"button",25),t.NdJ("click",function(){return n.onPositiveClick("next")}),t._uU(67,"\u7522\u751f\u5ea7\u4f4d\u5716"),t.qZA()()()()()(),t.TgZ(68,"section",26)(69,"div",27)(70,"cine-card",3)(71,"cine-card-header",28),t._uU(72,"\u203b\u9ede\u9078\u4ee5\u8a2d\u5b9a\u975e\u5ea7\u4f4d\u5340(ex:\u8d70\u9053)"),t.qZA(),t.TgZ(73,"cine-card-content")(74,"app-step2",29),t.NdJ("fg",function(i){return n.addForm(i,"step2")}),t.qZA()()()()()(),t.TgZ(75,"div",30)(76,"section",31)(77,"div",0),t.YNc(78,Zt,5,0,"ng-template",32),t.YNc(79,St,1,0,"ng-template",null,33,t.W1O),t.YNc(81,kt,5,0,"div",34),t.YNc(82,Ft,3,0,"div",34),t.qZA()()()),2&e){const a=t.MAs(80);t.xp6(2),t.Q6J("formGroup",n.formGroup),t.xp6(19),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4),t.xp6(11),t.Q6J("ngForOf",n.typeOptions),t.xp6(13),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(6),t.Q6J("ngModel",n.inputRow),t.xp6(5),t.Q6J("ngModel",n.inputCol),t.xp6(2),t.Q6J("disabled",n.step!==n.Step.createMap),t.xp6(2),t.Q6J("hidden",n.step===n.Step.createMap),t.xp6(6),t.Q6J("step",n.step),t.xp6(4),t.Q6J("ngIf",n.step>n.Step.createMap)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",n.step<n.Step.seatTypeSetting&&n.step!==n.Step.createMap),t.xp6(1),t.Q6J("ngIf",n.step===n.Step.seatTypeSetting)}},dependencies:[h.sg,h.O5,l.Fj,l.wV,l.JJ,l.JL,l.qQ,l.sg,l.u,T.VQ,T.U0,y.KE,y.hX,S.gD,v.ey,k.lW,F.A,I.g,H.n,G],styles:[".form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{width:20%;font-weight:400;font-size:13px;color:#ddd}.form-common-back[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{width:80%;min-height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{height:48px;padding:16px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-input.input-textarea[_ngcontent-%COMP%]{height:200px!important;width:100%!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field{font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:16px 12px!important;padding-bottom:12px;border-radius:16px!important}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0;border-top:0}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select-arrow-wrapper{margin-top:10px}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-form-field-label-wrappe{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted{display:none}.utility-common-back[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.ng-tns-c38-2.ng-star-inserted.mat-form-field-empty.mat-empty{display:inline-block!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container{height:15px;width:15px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle, .utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{border-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-outer-circle{height:15px;width:15px;border-width:1px}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]     .mat-radio-button .mat-radio-container .mat-radio-inner-circle{height:15px;width:15px;background-color:#fff!important}.utility-common-back[_ngcontent-%COMP%]   .form-radio.list-row[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:center}.utility-common-back[_ngcontent-%COMP%]   .form-radio[_ngcontent-%COMP%]   .list-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.utility-common-back[_ngcontent-%COMP%]   .form-text[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;height:48px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-infix{border-top:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{border-top:0!important;display:flex;align-items:center;height:48px;background:#1A1A1A;border:1px solid rgba(255,255,255,.1);border-radius:16px;color:#ddd}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{padding:0 12px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{margin-right:5px}.utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-underline, .utility-common-back[_ngcontent-%COMP%]   .form-date[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-subscript-wrapper{display:none}.utility-common-back[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:6px 12px;letter-spacing:.1em;text-align:center;font-weight:500;font-size:12px}.utility-common-back[_ngcontent-%COMP%]   .btn.gray[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#ffffff80}.utility-common-back[_ngcontent-%COMP%]   .btn.small[_ngcontent-%COMP%]{border-radius:4px;height:30px}.utility-common-back[_ngcontent-%COMP%]   .btn.medium[_ngcontent-%COMP%]{border-radius:6px;height:42px}.form-title[_ngcontent-%COMP%]{width:25%!important}.form-content[_ngcontent-%COMP%]{margin-left:10px}.form-text[_ngcontent-%COMP%]{font-size:15px!important;margin-left:16px}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#ffffff0d}"]}),o})();function It(o,r){if(1&o&&(t.TgZ(0,"li",11)(1,"div",12),t._uU(2),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e)}}function qt(o,r){if(1&o&&(t.TgZ(0,"ul"),t.YNc(1,It,3,1,"li",10),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)}}function Dt(o,r){if(1&o&&t.YNc(0,qt,2,1,"ul",9),2&o){const e=t.oxw();t.Q6J("ngIf",e.colsArr.length>0)}}function Ut(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",14)(1,"input",15,16),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,c=t.oxw(3);return t.KtG(c.rowsOrder[s]=a)})("input",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.convertToUpperCase())})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=r.$implicit,n=r.index,a=t.oxw(3);t.xp6(1),t.s9C("value",e),t.Q6J("ngModel",a.rowsOrder[n])}}function Et(o,r){if(1&o&&(t.TgZ(0,"ul"),t.YNc(1,Ut,3,2,"li",13),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsOrder)("ngForTrackBy",e.trackByIndex)}}function Jt(o,r){if(1&o&&t.YNc(0,Et,2,2,"ul",9),2&o){const e=t.oxw();t.Q6J("ngIf",e.colsArr.length>0)}}function Nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",19)(1,"app-manager-seatchart-seat",20),t.NdJ("activeOut",function(a){t.CHM(e);const i=t.oxw(2);return t.KtG(i.activeOut(a))}),t.qZA()()}if(2&o){const e=r.index,n=t.oxw().index,a=t.oxw();t.xp6(1),t.Q6J("seatIndex",n*a.cols+e)("seatSetting",a.seatSetting)("showType",a.responseArr[n*a.cols+e])}}function Lt(o,r){if(1&o&&(t.TgZ(0,"li")(1,"ul",17),t.YNc(2,Nt,2,3,"li",18),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.colsArr)}}function Ht(o,r){if(1&o&&(t.TgZ(0,"li",27),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Qt(o,r){if(1&o&&(t.TgZ(0,"ul",25),t.YNc(1,Ht,2,1,"li",26),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.colsOrder)}}function Bt(o,r){if(1&o&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"span",23),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,Qt,2,1,"ul",24),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.rowsArr.length>0)}}function Gt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"input",30,16),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).index,c=t.oxw(3);return t.KtG(c.colsOrder[s]=a)})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectAllText())}),t.qZA()()}if(2&o){const e=r.$implicit,n=r.index,a=t.oxw(3);t.xp6(1),t.s9C("value",e),t.Q6J("ngModel",a.colsOrder[n])}}function Rt(o,r){if(1&o&&(t.TgZ(0,"ul",25),t.YNc(1,Gt,3,2,"li",29),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.colsOrder)("ngForTrackBy",e.trackByIndex)}}function Yt(o,r){if(1&o&&(t.TgZ(0,"div",21)(1,"div",28),t._UZ(2,"span",23),t.qZA(),t.TgZ(3,"div",6),t.YNc(4,Rt,2,2,"ul",24),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.rowsArr.length>0)}}let jt=(()=>{class o{constructor(){this.responseArr=[],this.rowsArr=[],this.colsArr=[],this.rowsOrder=[],this.colsOrder=[],this.lastType=!0,this.cols=0,this.rows=0,this.isPreview=!1,this.getViewData={seatMap:[],rowLabel:[],colLabel:[]},this.type=!0,this.step=1,this.seatMapResult=new t.vpe}ngOnInit(){this.createSeat(this.rows,this.cols),(0===this.rowsOrder.length||this.rowsOrder.length!=this.rows||this.lastType!=this.type)&&(this.rowsOrder=this.createRowsOrder(this.rows,this.type),this.lastType=this.type),(0===this.colsOrder.length||this.colsOrder.length!=this.cols)&&(this.colsOrder=this.createRowsOrder(this.cols,!1)),this.isPreview&&(console.log(this.getViewData),this.responseArr=this.getViewData.seatMap,this.rowsOrder=this.getViewData.rowLabel,this.colsOrder=this.getViewData.colLabel,this.seatSetting=4)}ngOnChanges(){this.createSeat(this.rows,this.cols),(0===this.rowsOrder.length||this.rowsOrder.length!=this.rows||this.lastType!=this.type)&&(this.rowsOrder=this.createRowsOrder(this.rows,this.type),this.lastType=this.type),(0===this.colsOrder.length||this.colsOrder.length!=this.cols)&&(this.colsOrder=this.createRowsOrder(this.cols,!1)),this.isPreview&&(console.log(this.getViewData),this.responseArr=this.getViewData.seatMap,this.rowsOrder=this.getViewData.rowLabel,this.colsOrder=this.getViewData.colLabel,this.seatSetting=4)}trackByIndex(e,n){return e}convertToUpperCase(){for(let e=0;e<this.rowsOrder.length;e++)this.rowsOrder[e]=this.rowsOrder[e].toUpperCase()}selectAllText(){document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}activeOut(e){this.responseArr[e.seatIndex]=e.type,console.log("activeOut"),console.log(this.responseArr);const n=JSON.parse(JSON.stringify({seatMap:this.responseArr,rowLabel:this.rowsOrder,colLabel:this.colsOrder}));this.seatMapResult.emit(n)}createSeat(e,n){this.responseArr=Array(e*n).fill("0"),this.rowsArr=Array(e).fill("0"),this.colsArr=Array(n).fill("0")}createRowsOrder(e,n){const a=[],i="A".charCodeAt(0);for(let s=0;s<e;s++){const c=n?String.fromCharCode(i+s):String(s+1);a.push(c)}return a}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-manager-seatchart"]],inputs:{cols:"cols",rows:"rows",isPreview:"isPreview",getViewData:"getViewData",type:"type",step:"step"},outputs:{seatMapResult:"seatMapResult"},features:[t.TTD],decls:13,vars:5,consts:[[1,"w-full"],[1,"screen-border"],[1,"screen"],[1,"flex","w-full","p-5","pb-0"],[3,"ngIf","ngIfElse"],["canEditRow",""],[1,"flex-1"],[4,"ngFor","ngForOf"],["canEditCol",""],[4,"ngIf"],["class","mx-3",4,"ngFor","ngForOf"],[1,"mx-3"],[1,"w-6","h-8","rounded-t-lg","rounded-b-md","p-1","text-gray-400","flex","justify-center","items-center"],["class","mx-3 my-0.5",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mx-3","my-0.5"],[1,"text-input","w-8","h-7","p-1","mb-1","flex","justify-center","items-center","text-center",2,"color","#9C6DFF","border","1px solid #9C6DFF",3,"value","ngModel","ngModelChange","input","click"],["inputRef","ngModel"],[1,"flex"],["class","m-0.5 flex-1",4,"ngFor","ngForOf"],[1,"m-0.5","flex-1"],[3,"seatIndex","seatSetting","showType","activeOut"],[1,"flex","w-full","px-5","mt-0.5","mb-3"],[1,"w-12"],[2,"display","none"],["class","flex justify-between",4,"ngIf"],[1,"flex","justify-between"],["class","w-full text-center text-gray-400","style","font-size: 20%;",4,"ngFor","ngForOf"],[1,"w-full","text-center","text-gray-400",2,"font-size","20%"],[1,"w-14"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-input","w-full","text-center","h-6",2,"color","#71DDFF","border","1px solid #71DDFF","font-size","60%",3,"value","ngModel","ngModelChange","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section",0)(1,"div"),t._UZ(2,"div",1)(3,"div",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,Dt,1,1,"ng-template",4),t.YNc(6,Jt,1,1,"ng-template",null,5,t.W1O),t.TgZ(8,"ul",6),t.YNc(9,Lt,3,1,"li",7),t.qZA()(),t.YNc(10,Bt,5,1,"ng-template",4),t.YNc(11,Yt,5,1,"ng-template",null,8,t.W1O),t.qZA()),2&e){const a=t.MAs(7),i=t.MAs(12);t.xp6(5),t.Q6J("ngIf",2!=n.step)("ngIfElse",a),t.xp6(4),t.Q6J("ngForOf",n.rowsArr),t.xp6(1),t.Q6J("ngIf",2!=n.step)("ngIfElse",i)}},dependencies:[h.sg,h.O5,l.Fj,l.JJ,l.On,B],styles:[".screen-border[_ngcontent-%COMP%]{border-width:1px;border-color:#8988ff}.screen[_ngcontent-%COMP%]{width:100%;height:32px;background:linear-gradient(180deg,rgba(137,136,255,.2) 0%,rgba(103,101,238,0) 100%);flex:none;order:1;align-self:stretch;flex-grow:0}.text-input[_ngcontent-%COMP%]{background:#1A1A1A}"]}),o})();const $t=[{path:"",children:[{path:"",component:Q},{path:`${f.F.DETAIL}/${f.F.CREATE}`,component:R},{path:":id",component:(()=>{class o{constructor(e,n){this.route=e,this.theaterService=n,this.theaterId="",this.rows=0,this.cols=0,this.getViewData={seatMap:[],rowLabel:[],colLabel:[]},this.theaterTypes={1:"2D",2:"3D",3:"IMAX",4:"4DX"}}ngOnInit(){this.theaterId=this.route.snapshot.params.id,this.getTheaterInfo(this.theaterId)}getTheaterInfo(e){setTimeout(()=>{this.theaterService.getTheaterInfo(e).subscribe(n=>{console.log(n),this.theaterData=n.data,this.rows=n.data.row,this.cols=n.data.col,this.getViewData.rowLabel=n.data.rowLabel,this.getViewData.colLabel=n.data.colLabel,this.getViewData.seatMap=n.data.seatMap})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.gz),t.Y36(Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-theater-view-page"]],decls:35,vars:9,consts:[[1,"wrapper-page"],[1,"card-wrap","px-[15px]"],[1,"main-box"],[1,"main-card"],[1,"showBox"],[1,"showText"],[3,"rows","cols","getViewData","isPreview"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"cine-card",1)(2,"cine-card-content")(3,"div",2)(4,"div",3)(5,"span"),t._uU(6,"\u540d\u7a31"),t.qZA(),t.TgZ(7,"div",4)(8,"span",5),t._uU(9),t.qZA()()(),t.TgZ(10,"div",3)(11,"span"),t._uU(12,"\u6a13\u5c64"),t.qZA(),t.TgZ(13,"div",4)(14,"span",5),t._uU(15),t.qZA()()(),t.TgZ(16,"div",3)(17,"span"),t._uU(18,"\u985e\u578b"),t.qZA(),t.TgZ(19,"div",4)(20,"span",5),t._uU(21),t.qZA()()(),t.TgZ(22,"div",3)(23,"span"),t._uU(24,"\u5e2d\u6b21"),t.qZA(),t.TgZ(25,"div",4)(26,"span",5),t._uU(27),t.qZA()()(),t.TgZ(28,"div",3)(29,"span"),t._uU(30,"\u7121\u969c\u7919\u5e2d\u6b21"),t.qZA(),t.TgZ(31,"div",4)(32,"span",5),t._uU(33),t.qZA()()()(),t._UZ(34,"app-manager-seatchart",6),t.qZA()()()),2&e&&(t.xp6(9),t.Oqu(null==n.theaterData?null:n.theaterData.name),t.xp6(6),t.hij("",null==n.theaterData?null:n.theaterData.floor,"F"),t.xp6(6),t.Oqu(n.theaterTypes[null==n.theaterData?null:n.theaterData.type]),t.xp6(6),t.Oqu(null==n.theaterData?null:n.theaterData.totalCapacity),t.xp6(6),t.Oqu(null==n.theaterData?null:n.theaterData.wheelChairCapacity),t.xp6(1),t.Q6J("rows",n.rows)("cols",n.cols)("getViewData",n.getViewData)("isPreview",!0))},dependencies:[F.A,I.g,jt],styles:[".wrapper-page[_ngcontent-%COMP%]{margin:0 30px 100px!important}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]{margin-bottom:50px!important}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]{padding:0 30px;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:50px}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]   .showBox[_ngcontent-%COMP%]{margin-top:10px;border:rgba(255,255,255,.3) 1px solid;border-radius:12px;text-align:center}.wrapper-page[_ngcontent-%COMP%]   .card-wrap[_ngcontent-%COMP%]   .main-box[_ngcontent-%COMP%]   .main-card[_ngcontent-%COMP%]   .showBox[_ngcontent-%COMP%]   .showText[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#a7e8ff;margin-bottom:0;padding:15px}"]}),o})()},{path:`${f.F.DETAIL}/${f.F.EDIT}/:id`,component:R},{path:`${f.F.LIST}`,component:Q}]}];let zt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.Bz.forChild($t),x.Bz]}),o})();var Kt=d(4144),Xt=d(9602),Wt=d(4011),te=d(3687);let ee=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,l.u5,A.Is]}),o})(),ne=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,l.UX,l.u5,zt,J.Ps,T.Fk,S.LD,X,Xt.FA,v.XK,Kt.c,k.ot,L.TU,Wt.d,te.U,ee]}),o})()}}]);